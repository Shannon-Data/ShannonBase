# restart
CREATE DATABASE rpd_load_info_db;
USE rpd_load_info_db;
#
# Load into and unload from secondary engine test.
#
CREATE TABLE t1 (score int, name char(10), id int primary key, gender char(1)) SECONDARY_ENGINE RAPID;
ALTER TABLE t1 secondary_unload;
ERROR HY000: rpd_load_info_db.t1 table is not loaded into rapid yet
ALTER TABLE t1 secondary_load;
ALTER TABLE t1 secondary_load;
ERROR HY000: rpd_load_info_db.t1 already loaded
SELECT TABLE_SCHEMA, TABLE_NAME, CREATE_OPTIONS FROM INFORMATION_SCHEMA.TABLES 
WHERE CREATE_OPTIONS LIKE '%SECONDARY_ENGINE%' AND TABLE_SCHEMA LIKE 'rpd_load_test';
TABLE_SCHEMA	TABLE_NAME	CREATE_OPTIONS
SELECT * FROM performance_schema.rpd_tables;
ID	SNAPSHOT_SCN	PERSISTED_SCN	POOL_TYPE	DATA_PLACEMENT_TYPE	NROWS	LOAD_STATUS	LOAD_PROGRESS	SIZE_BYTES	TRANSFORMATION_BYTES	QUERY_COUNT	LAST_QUERIED	LOAD_START_TIMESTAMP	LOAD_END_TIMESTAMP	RECOVERY_SOURCE	RECOVERY_START_TIMESTAMP	RECOVERY_END_TIMESTAMP	LOAD_TYPE	LOGICAL_PARTS_LOADED_AT_SCN	AUTO_ZMP_COLUMNS	ACE_MODEL
IGNORE	IGNORE	0	SNAPSHOT	0	0	AVAIL_RPDGSTABSTATE	100	0	0	0	0000-00-00 00:00:00	IGNORE	IGNORE	OBJECTSTORAGE	0000-00-00 00:00:00	0000-00-00 00:00:00	USER	[]	[]	0
SELECT * FROM performance_schema.rpd_table_id;
ID	NAME	SCHEMA_NAME	TABLE_NAME
IGNORE	rpd_load_info_db\t1	rpd_load_info_db	t1
SELECT * FROM performance_schema.rpd_columns;
TABLE_ID	COLUMN_ID	NDV	ENCODING	DATA_PLACEMENT_INDEX	DICT_SIZE_BTYES
IGNORE	0	0	N/A	0	0
IGNORE	1	0	N/A	0	0
IGNORE	2	0	N/A	0	0
IGNORE	3	0	N/A	0	0
SELECT * FROM performance_schema.rpd_column_id;
ID	TABLE_ID	COLUMN_NAME
0	IGNORE	score
1	IGNORE	name
2	IGNORE	id
3	IGNORE	gender
SELECT * FROM performance_schema.rpd_table_id;
ID	NAME	SCHEMA_NAME	TABLE_NAME
IGNORE	rpd_load_info_db\t1	rpd_load_info_db	t1
ALTER TABLE t1 secondary_unload;
SELECT TABLE_SCHEMA, TABLE_NAME, CREATE_OPTIONS FROM INFORMATION_SCHEMA.TABLES 
WHERE CREATE_OPTIONS LIKE '%SECONDARY_ENGINE%' AND TABLE_SCHEMA LIKE 'rpd_load_test';
TABLE_SCHEMA	TABLE_NAME	CREATE_OPTIONS
SELECT * FROM performance_schema.rpd_tables;
ID	SNAPSHOT_SCN	PERSISTED_SCN	POOL_TYPE	DATA_PLACEMENT_TYPE	NROWS	LOAD_STATUS	LOAD_PROGRESS	SIZE_BYTES	TRANSFORMATION_BYTES	QUERY_COUNT	LAST_QUERIED	LOAD_START_TIMESTAMP	LOAD_END_TIMESTAMP	RECOVERY_SOURCE	RECOVERY_START_TIMESTAMP	RECOVERY_END_TIMESTAMP	LOAD_TYPE	LOGICAL_PARTS_LOADED_AT_SCN	AUTO_ZMP_COLUMNS	ACE_MODEL
0	1	0	SNAPSHOT	0	0	AVAIL_RPDGSTABSTATE	100	0	0	0	0000-00-00 00:00:00	IGNORE	IGNORE	OBJECTSTORAGE	0000-00-00 00:00:00	0000-00-00 00:00:00	USER	[]	[]	0
SELECT * FROM performance_schema.rpd_table_id;
ID	NAME	SCHEMA_NAME	TABLE_NAME
SELECT * FROM performance_schema.rpd_columns;
TABLE_ID	COLUMN_ID	NDV	ENCODING	DATA_PLACEMENT_INDEX	DICT_SIZE_BTYES
SELECT * FROM performance_schema.rpd_column_id;
ID	TABLE_ID	COLUMN_NAME
SELECT * FROM performance_schema.rpd_table_id;
ID	NAME	SCHEMA_NAME	TABLE_NAME
DROP TABLE t1;
DROP DATABASE rpd_load_info_db;
