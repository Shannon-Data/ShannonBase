create database sh_params;
use sh_params;
CREATE TABLE t1 (
id INT PRIMARY KEY AUTO_INCREMENT,
user_name VARCHAR(50) NOT NULL,
account_status ENUM('active', 'inactive', 'suspended') NOT NULL DEFAULT 'active'
) ENGINE=InnoDB SECONDARY_ENGINE=RAPID;
INSERT INTO t1 (user_name, account_status) VALUES
('张三', 'active'),
('李四', 'inactive'),
('bob', 'inactive'),
('grace', 'active'),
('王五', 'suspended');
SHOW VARIABLES LIKE "%rapid%";
Variable_name	Value
rapid_async_column_threshold	16
rapid_max_purger_timeout	5000
rapid_memory_size_max	536870912
rapid_min_versions_for_purge	10
rapid_parallel_load_max	10000
rapid_parallel_part_load_threshold	32
rapid_pop_buffer_size_max	268435456
rapid_purge_batch_size	64
rapid_purge_efficiency_threshold	0.100000
rapid_self_load_base_relation_fill_percentage	70
rapid_self_load_enabled	OFF
rapid_self_load_interval_seconds	86400
rapid_self_load_skip_quiet_check	OFF
rapid_sync_mode	DIRECT_NOTIFICATION
rapid_use_dynamic_offload	ON
SET rapid_async_column_threshold=11;
ERROR HY000: Variable 'rapid_async_column_threshold' is a GLOBAL variable and should be set with SET GLOBAL
SET GLOBAL rapid_async_column_threshold=11;
SHOW VARIABLES LIKE "%rapid%";
Variable_name	Value
rapid_async_column_threshold	11
rapid_max_purger_timeout	5000
rapid_memory_size_max	536870912
rapid_min_versions_for_purge	10
rapid_parallel_load_max	10000
rapid_parallel_part_load_threshold	32
rapid_pop_buffer_size_max	268435456
rapid_purge_batch_size	64
rapid_purge_efficiency_threshold	0.100000
rapid_self_load_base_relation_fill_percentage	70
rapid_self_load_enabled	OFF
rapid_self_load_interval_seconds	86400
rapid_self_load_skip_quiet_check	OFF
rapid_sync_mode	DIRECT_NOTIFICATION
rapid_use_dynamic_offload	ON
ALTER TABLE  t1 secondary_load;
SET GLOBAL rapid_async_column_threshold=10;
ERROR HY000: Tables have been loaded, cannot change the rapid params
ALTER TABLE  t1 secondary_unload;
SET GLOBAL rapid_async_column_threshold=10;
SHOW VARIABLES LIKE "%rapid%";
Variable_name	Value
rapid_async_column_threshold	10
rapid_max_purger_timeout	5000
rapid_memory_size_max	536870912
rapid_min_versions_for_purge	10
rapid_parallel_load_max	10000
rapid_parallel_part_load_threshold	32
rapid_pop_buffer_size_max	268435456
rapid_purge_batch_size	64
rapid_purge_efficiency_threshold	0.100000
rapid_self_load_base_relation_fill_percentage	70
rapid_self_load_enabled	OFF
rapid_self_load_interval_seconds	86400
rapid_self_load_skip_quiet_check	OFF
rapid_sync_mode	DIRECT_NOTIFICATION
rapid_use_dynamic_offload	ON
SET GLOBAL rapid_self_load_enabled=on;
SET GLOBAL rapid_self_load_base_relation_fill_percentage = 80;
SET GLOBAL rapid_self_load_interval_seconds=864;
SHOW VARIABLES LIKE "%rapid%";
Variable_name	Value
rapid_async_column_threshold	10
rapid_max_purger_timeout	5000
rapid_memory_size_max	536870912
rapid_min_versions_for_purge	10
rapid_parallel_load_max	10000
rapid_parallel_part_load_threshold	32
rapid_pop_buffer_size_max	268435456
rapid_purge_batch_size	64
rapid_purge_efficiency_threshold	0.100000
rapid_self_load_base_relation_fill_percentage	80
rapid_self_load_enabled	ON
rapid_self_load_interval_seconds	864
rapid_self_load_skip_quiet_check	OFF
rapid_sync_mode	DIRECT_NOTIFICATION
rapid_use_dynamic_offload	ON
DROP DATABASE sh_params;
